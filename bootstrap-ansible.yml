# bootstrap-ansible.yml
- name: "Bootstrap Ansible dependencies"
  hosts: localhost
  connection: local

  vars:
    # Define the base path where Ansible looks for collections
    galaxy_collections_path: "{{ ansible_env.HOME }}/.ansible/collections/ansible_collections"

  tasks:
    - name: "Install community.general collection via ansible-galaxy"
      become: yes
      ansible.builtin.command: "ansible-galaxy collection install community.general"
      args:
        creates: "{{ galaxy_collections_path }}/community/general"

    - name: "Install AUR collection via git from the correct URL"
      become: yes
      ansible.builtin.git:
        repo: 'https://github.com/kewlfft/ansible-aur.git'
        dest: "{{ galaxy_collections_path }}/kewlfft/aur"
        version: master
